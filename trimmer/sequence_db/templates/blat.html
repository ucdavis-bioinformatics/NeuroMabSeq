{% extends 'base.html' %}


<!--<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">-->
<!--<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>-->

{% load crispy_forms_tags %}
{% block content %}
<style>
table {
    font-family: arial, sans-serif;
    border-collapse: collapse;
    width: 50%;
}

td, th {
    border: 1px solid #dddddd;
    text-align: left;
    padding: 8px;
}

tr:nth-child(even) {
    background-color: #dddddd;

}

#id_sequence {
    width: 100%;
    height: 200px;
}

</style>

<!-- Datatables stuff -->
<!--<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.17/css/jquery.dataTables.css">-->
<!--<script src="https://code.jquery.com/jquery-1.9.1.js"></script>-->
<!--<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.17/js/jquery.dataTables.js"></script>-->

<!--<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.9/js/jquery.dataTables.min.js"></script>-->
<!--<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/responsive/1.0.7/js/dataTables.responsive.min.js"></script>-->


<!--<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.9/css/jquery.dataTables.min.css">-->
<!--<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/responsive/1.0.7/css/responsive.dataTables.min.css">-->


{% load static %}
<link rel="stylesheet" href="{% static "css/jquery.dataTables.css" %}">
<link rel="stylesheet" href="{% static "css/jquery.dataTables.min.css" %}">
<link rel="stylesheet" href="{% static "css/responsive.dataTables.min.css" %}">
<script src="{% static "js/jquery-1.9.1.js" %}"></script>
<script src="{% static "js/jquery.dataTables.js" %}"></script>
<script src="{% static "js/jquery.dataTables.min.js" %}"></script>
<script src="{% static "js/dataTables.responsive.min.js" %}"></script>
<script src="{% static "js/jquery.dataTables.js" %}"></script>



<script>




$(document).ready(function(){ $('#myTable').DataTable(); });

$(document).ready( function () {
  var table = $('#example').DataTable({
      "order": [[ 1, 'desc' ], [ 0, 'desc' ]]

  });
} );

$(document).ready(function() {
    $('#example1').DataTable({"pageLength": 50, searching: false, paging: false, info: false, ordering: false});
} );


</script>
<div class="w3-container w3-content w3-padding-16">
    <div class="well" style="background-color:EAEAEA;padding:10;border-radius:8px;">

              {% if errors %}
                    {% for error in errors %}
                        {% if error %}
                            <div class="alert alert-danger">
                                <strong> Entry {{forloop.counter}}: {{ error|escape }}</strong>
                            </div>
                        {% endif %}
                    {% endfor %}
              {% endif %}
              {% if err %}
                            <div class="alert alert-danger">
                                <strong> Entry {{forloop.counter}}: {{ err|escape }}</strong>
                            </div>
              {% endif %}

              {% if out %}
                            <div>
                                <strong> Entry {{forloop.counter}}: {{ out|escape }}</strong>
                            </div>
              {% endif %}
              {% if prefix %}
                            <div class="alert">
                                <strong> Entry {{forloop.counter}}: {{ prefix|escape }}</strong>
                            </div>
              {% endif %}
    <h2>BLAT Search</h2>
      <form method="post">
            {% csrf_token %}
            {{ form|crispy }}
                <script src='https://www.google.com/recaptcha/api.js'></script>
                <div style="padding:20px" class="g-recaptcha" data-sitekey="6LfBvbwZAAAAAJDEQQ5bFnb-KwzhiGmr8sHDeHRp"></div>
          <div style="padding-top:20px">

            <button type="submit" class="btn btn-success" >Submit</button>

          </div>
      </form>
    </div>
</div>

  <div class="w3-container w3-content w3-center w3-padding-5" style="max-width:10000px">
  <h2>Query Results</h2>
        <table id="example" class="display responsive nowrap" cellspacing="0" width="100%" align="center">
              <thead>
                <tr>
                    <th>Percent Identity</th>
                    <th>Score</th>
                    <th>Mab ID</th>
                    <th>Chain Type</th>
                    <th>See Entry</th>

                </tr>
              </thead>
          <tbody>
          {% for item in queryset %}
              <tr>
                  <td>{{item.ident_pct}}</td>
                  <td>{{item.score}}</td>
                  <td>{{item.mabid}}</td>
                  {% if item.chain %}
                    <td>{{item.chain}}</td>
                  {% else %}
                    <td></td>
                  {% endif %}
                  {% if item.pk %}
                  <td>
                    <a href="/new_entry/{{item.entry_pk}}/{{item.pk}}">
                      <button  label="Entry Details" name="so_link" class="btn btn-info">See Full Entry</button>
                    </a>
                  </td>
                   {% else %}
                  <td></td>
                  {% endif %}
              </tr>
          {% empty %}
           <div>No invoices yet.</div>
          {% endfor %}
           </tbody>
        </table>
</div>

{% endblock %}